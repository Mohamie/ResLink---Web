@inject BackendlessService backendlessService
@inject NavigationManager NavigationManager
@inject NotificationService NotificationService


@if (CurrentlyLoggedUser != null)
{
    <h3>
        Hello @CurrentlyLoggedUser.Email
        <span>
            <RadzenButton Text="Logout" ButtonStyle="ButtonStyle.Info" Click="LogoutUser" />
        </span>
    </h3>

}

@code
{
    public BackendlessUser CurrentlyLoggedUser { get; set; }

    protected override void OnInitialized()
    {
        CurrentlyLoggedUser = Backendless.UserService.CurrentUser;
    }

    private async Task LogoutUser()
    {
        await ResLinkUserLogin.LogoutUser();
        NotificationMessage message = new NotificationMessage
        {
            Severity = NotificationSeverity.Info,
            Detail = "Successfully logged out",
            Duration = 4000
        };

        NotificationService.Notify(message);

        NavigationManager.NavigateTo("/auth/login");
    }
}
