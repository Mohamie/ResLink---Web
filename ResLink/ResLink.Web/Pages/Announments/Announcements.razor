@page "/announcements"
@inject DialogService DialogService
@inject NotificationService NotificationService

<RadzenButton class="my-4" Text="Add Announcement" Icon="add_circle_outline" Click="(() => AddAnnouncement())" />


<AnnouncementsList/>

@code
{
    //Create a ViewModel for Announcements
    Announcement announcement;

    async Task AddAnnouncement()
    {
        announcement = await DialogService.OpenAsync<AddAnnouncementPage>("Add Announcement");

        //Todo: Extract data from ViewModel to Model, add relationships like category, severity and authur of the announcement
        if (announcement != null)
        {
            await AnnouncementRepository.SaveAnnouncement(announcement);

            NotificationMessage message = new NotificationMessage { Severity = NotificationSeverity.Success, Summary = "Announcement:", Detail = "Added Successfuly", Duration = 4000 };

            NotificationService.Notify(message);
        }

    }
}
